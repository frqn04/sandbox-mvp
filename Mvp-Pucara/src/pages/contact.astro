---
import Layout from "../layouts/Layout.astro";


const metaDescription = "Formulario de contacto para Pucará Gaming. Envíanos tu mensaje y contáctanos para representar marcas, sponsors u organizaciones.";
---

<Layout title="Contacto - Pucará Gaming" description={metaDescription}>
  <main class="contact-page relative min-h-screen pt-20 bg-gradient-to-br from-orange-500/10 to-black/80 text-white overflow-hidden">
    <section class="contact-section relative overflow-hidden py-12">
      <div class="container max-w-xl mx-auto px-5 relative z-10 bg-black/80 rounded-xl border-2 border-orange-600/70 backdrop-blur-md shadow-lg shadow-orange-600/20 p-8">
        <h1 class="main-title text-4xl font-bold uppercase tracking-widest mb-3 text-center drop-shadow-lg">
          CONTÁCTANOS
        </h1>
        <div class="title-underline w-44 h-1.5 bg-primary mx-auto mb-6 shadow-lg"></div>

        <p class="intro-text text-center mb-8 text-base leading-relaxed">
          Si te interesa establecer contacto con el área comercial de Pucará Gaming para representar marcas, sponsors u organizaciones. Si deseás acceder a material oficial y generar contenido exclusivo en medios periodísticos, audiovisuales o digitales. Si buscás ser parte del equipo profesional de trabajo y sumarte al crecimiento de Pucará Gaming.
        </p>

        <h2 class="form-title text-2xl font-bold uppercase tracking-widest mb-6 text-primary text-center">
          ENVÍANOS TU MENSAJE
        </h2>

        <form id="contactForm" class="contact-form flex flex-col gap-6" novalidate>
          <div class="form-group flex flex-col">
            <label for="nombre" class="mb-1 font-semibold">Nombre completo *</label>            <input type="text" id="nombre" name="nombre" required
              class="rounded-md border-2 border-white/20 bg-black/30 p-3 text-white placeholder:text-gray-400 focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary transition"
              aria-describedby="nombre-error" />
            <span id="nombre-error" class="text-red-500 text-sm mt-1 hidden">Por favor ingresa tu nombre completo.</span>
          </div>

          <div class="form-group flex flex-col">
            <label for="fecha-nacimiento" class="mb-1 font-semibold">Fecha de nacimiento *</label>            <input type="date" id="fecha-nacimiento" name="fecha-nacimiento" required
              class="date-picker rounded-md border-2 border-white/20 bg-black/30 p-3 text-white placeholder:text-gray-400 focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary transition"
              max={new Date().toISOString().split('T')[0]}
              aria-describedby="fecha-error" />
            <span id="fecha-error" class="text-red-500 text-sm mt-1 hidden">Por favor ingresa una fecha válida.</span>
          </div>

          <div class="form-group flex flex-col">
            <label for="email" class="mb-1 font-semibold">Email *</label>            <input type="email" id="email" name="email" required
              class="rounded-md border-2 border-white/20 bg-black/30 p-3 text-white placeholder:text-gray-400 focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary transition"
              aria-describedby="email-error" />
            <span id="email-error" class="text-red-500 text-sm mt-1 hidden">Por favor ingresa un email válido.</span>
          </div>

          <div class="form-group flex flex-col">
            <label for="mensaje" class="mb-1 font-semibold">Mensaje *</label>            <textarea id="mensaje" name="mensaje" rows="6" required placeholder="Cuéntanos sobre tu propuesta o consulta..."
              class="rounded-md border-2 border-white/20 bg-black/30 p-3 text-white placeholder:text-gray-400 focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary transition resize-none"
              aria-describedby="mensaje-error"></textarea>
            <span id="mensaje-error" class="text-red-500 text-sm mt-1 hidden">Por favor ingresa un mensaje.</span>
          </div>

          <fieldset class="form-group checkbox-group flex items-center gap-3" aria-describedby="terminos-error">
            <label class="checkbox-label flex items-center gap-3 cursor-pointer text-sm">
              <input type="checkbox" id="terminos" name="terminos" required class="w-5 h-5 rounded border-white/20 focus:ring-primary focus:ring-2" />
              Acepto los <a href="#" class="terms-link text-primary underline hover:text-orange-400">términos y condiciones</a> *
            </label>
            <span id="terminos-error" class="text-red-500 text-sm mt-1 hidden">Debes aceptar los términos y condiciones.</span>
          </fieldset>

          <button type="submit"
            class="submit-btn bg-gradient-to-br from-primary to-orange-400 text-white font-bold uppercase tracking-wider py-3 px-5 rounded-md shadow-lg hover:shadow-xl transition-transform hover:-translate-y-1 self-center">
            ENVIAR MENSAJE
          </button>
        </form>

        <div class="contact-info-simple mt-12 text-center">
          <h3 class="contact-subtitle text-xl font-semibold text-primary mb-4">Contáctanos también por email:</h3>
          <div class="email-contacts flex flex-col gap-3 max-w-md mx-auto">            <a href="mailto:comercial@pucaragaming.com" class="flex items-center gap-3 justify-center text-white hover:text-primary transition p-2 rounded-md bg-black/20">
              <i class="fa-solid fa-envelope"></i> comercial@pucaragaming.com
            </a>
            <a href="mailto:info@pucaragaming.com" class="flex items-center gap-3 justify-center text-white hover:text-primary transition p-2 rounded-md bg-black/20">
              <i class="fa-solid fa-envelope"></i> info@pucaragaming.com
            </a>
          </div>
        </div>

        <div class="social-links-simple mt-10 text-center">
          <h3 class="contact-subtitle text-xl font-semibold text-primary mb-4">Síguenos en redes:</h3>
          <div class="social-icons-simple flex justify-center gap-6">
            <a href="#" aria-label="Facebook" class="text-primary text-2xl hover:text-orange-400 transition">
              <i class="fa-brands fa-facebook-f"></i>
            </a>
            <a href="#" aria-label="Twitter" class="text-primary text-2xl hover:text-orange-400 transition">
              <i class="fa-brands fa-twitter"></i>
            </a>
            <a href="#" aria-label="Instagram" class="text-primary text-2xl hover:text-orange-400 transition">
              <i class="fa-brands fa-instagram"></i>
            </a>
            <a href="#" aria-label="YouTube" class="text-primary text-2xl hover:text-orange-400 transition">
              <i class="fa-brands fa-youtube"></i>
            </a>
            <a href="#" aria-label="Twitch" class="text-primary text-2xl hover:text-orange-400 transition">
              <i class="fa-brands fa-twitch"></i>
            </a>
            <a href="#" aria-label="TikTok" class="text-primary text-2xl hover:text-orange-400 transition">
              <i class="fa-brands fa-tiktok"></i>
            </a>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('contactForm') as HTMLFormElement;
    const dateInput = document.getElementById('fecha-nacimiento') as HTMLInputElement;

    const today = new Date();
    const minDate = new Date();
    minDate.setFullYear(today.getFullYear() - 100);

    if (dateInput) {
      dateInput.min = minDate.toISOString().split('T')[0];
      dateInput.max = today.toISOString().split('T')[0];
    }

    if (form) {
      form.addEventListener('submit', function (e) {
        e.preventDefault();

        // Validación simple visual
        let valid = true;        ['nombre', 'fecha-nacimiento', 'email', 'mensaje', 'terminos'].forEach(id => {
          const el = document.getElementById(id);
          const errorEl = document.getElementById(id + '-error');
          if (el) {
            if (id === 'terminos') {
              const checkbox = el as HTMLInputElement;
              if (!checkbox.checked) {
                valid = false;
                if (errorEl) errorEl.classList.remove('hidden');
              } else {
                if (errorEl) errorEl.classList.add('hidden');
              }
            } else {
              const input = el as HTMLInputElement | HTMLTextAreaElement;
              if (input.value === '' || input.value == null) {
                valid = false;
                if (errorEl) errorEl.classList.remove('hidden');
              } else {
                if (errorEl) errorEl.classList.add('hidden');
              }
            }
          }
        });

        if (!valid) {
          alert('Por favor completa todos los campos requeridos correctamente.');
          return;
        }

        alert('¡Gracias por tu mensaje! Te contactaremos pronto.');
        form.reset();
      });
    } else {
      console.error("No se encontró el formulario");
    }
  });
</script>

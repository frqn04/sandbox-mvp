---
import Layout from "../../layouts/Layout.astro";
import PlayerCard from "../../components/PlayerCard.astro";
import { getTeamById, getTeamStaticPaths } from "../../data/teams";

const { team } = Astro.params;

// Función para generar rutas estáticas
export async function getStaticPaths() {
  return getTeamStaticPaths();
}

// Obtener el equipo actual desde los datos centralizados
const currentTeam = getTeamById(team as string);

if (!currentTeam) {
  return new Response(null, {
    status: 404,
    statusText: 'Equipo no encontrado'
  });
}

const description = `Conocé al equipo de ${currentTeam.nombre} de Pucará Gaming. ${currentTeam.descripcion}`;
---

<Layout title={`${currentTeam.nombre} - Pucará Gaming`} description={description}>
  <main class={`font-ubuntu min-h-screen ${currentTeam.bgClass} text-light`}>
    
    <div class="max-w-6xl mx-auto px-5 py-12">
      <!-- Header del equipo -->
      <div class="flex flex-col md:flex-row items-center justify-center gap-4 md:gap-6 mb-12 animate-slide-up">
        <h1 class="text-4xl md:text-6xl font-bold uppercase tracking-wider text-primary drop-shadow-lg text-center glow-text">
          {currentTeam.nombre}
        </h1>
        <div class="text-4xl md:text-6xl animate-pulse">{currentTeam.emoji}</div>
      </div>

      <!-- Descripción del equipo -->
      <p class="text-lg md:text-xl text-white/80 text-center mb-12 max-w-4xl mx-auto leading-relaxed animate-fade-in">
        {currentTeam.descripcion}
      </p>

      <!-- Subtítulo de jugadores -->
      <div class="text-center mb-12 animate-fade-in">
        <h2 class="text-2xl md:text-3xl font-bold uppercase tracking-wider text-primary mb-2">
          JUGADORES
        </h2>
        <div class="w-24 h-1 bg-primary mx-auto"></div>
      </div>

      <!-- Grid de jugadores responsive con centrado condicional -->
      <div class={`${currentTeam.players.length === 1 
        ? 'flex justify-center' 
        : 'grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5'
      } gap-6 md:gap-8`}>
        {currentTeam.players.map((player) => (
          <div class={currentTeam.players.length === 1 ? 'w-full max-w-md' : ''}>
            <PlayerCard {...player} />
          </div>
        ))}
      </div>

      <!-- Botón volver -->
      <div class="text-center mt-12">
        <a href="/teams" class="inline-flex items-center gap-2 bg-primary hover:bg-primary/80 text-white font-semibold px-6 py-3 rounded-lg transition-all duration-300">
          <i class="fa-solid fa-arrow-left"></i>
          VOLVER A EQUIPOS
        </a>
      </div>
    </div>
  </main>
</Layout>